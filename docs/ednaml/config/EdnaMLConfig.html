<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>ednaml.config.EdnaMLConfig API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>ednaml.config.EdnaMLConfig</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python"># BaseConfig class to manage the input configurations. TODO

import json
from typing import List
import yaml
from ednaml.utils import config_serializer
from ednaml.config.ConfigDefaults import ConfigDefaults

from ednaml.config.ExecutionConfig import ExecutionConfig
from ednaml.config.LoggingConfig import LoggingConfig
from ednaml.config.LossConfig import LossConfig
from ednaml.config.OptimizerConfig import OptimizerConfig
from ednaml.config.SaveConfig import SaveConfig
from ednaml.config.SchedulerConfig import SchedulerConfig
from ednaml.config.TransformationConfig import TransformationConfig
from ednaml.config.ModelConfig import ModelConfig


class EdnaMLConfig:
    EXECUTION: ExecutionConfig
    SAVE: SaveConfig
    TRANSFORMATION: TransformationConfig
    MODEL: ModelConfig
    LOSS: List[LossConfig]
    OPTIMIZER: List[OptimizerConfig]  # one optimizer for each set of model params
    SCHEDULER: List[SchedulerConfig]  # one scheduler for each optimizer
    LOSS_OPTIMIZER: List[OptimizerConfig]  # one optimizer for each loss with params
    LOSS_SCHEDULER: List[SchedulerConfig]  # one scheduler for each loss_optimizer
    LOGGING: LoggingConfig

    def __init__(self, config_path: str, defaults: ConfigDefaults = ConfigDefaults()):
        ydict = {}
        with open(config_path, &#34;r&#34;) as cfile:
            ydict = yaml.safe_load(cfile.read().strip())

        self.EXECUTION = ExecutionConfig(ydict.get(&#34;EXECUTION&#34;, {}), defaults)
        self.SAVE = SaveConfig(ydict.get(&#34;SAVE&#34;, {}), defaults)
        self.TRANSFORMATION = TransformationConfig(
            ydict.get(&#34;TRANSFORMATION&#34;, {}), defaults
        )
        self.MODEL = ModelConfig(
            ydict.get(&#34;MODEL&#34;, {}), defaults
        )  # No default MODEL itself, though it will be instantiated here? deal with this TODO
        self.LOSS = [
            LossConfig(loss_item, defaults) for loss_item in ydict.get(&#34;LOSS&#34;, [])
        ]  # No default LOSS itself

        # Default optimizer is Adam
        self.OPTIMIZER = [
            OptimizerConfig(optimizer_item, defaults)
            for optimizer_item in ydict.get(&#34;OPTIMIZER&#34;, [{}])
        ]
        self.SCHEDULER = [
            SchedulerConfig(scheduler_item, defaults)
            for scheduler_item in ydict.get(&#34;SCHEDULER&#34;, [{}])
        ]

        self.LOSS_OPTIMIZER = [
            OptimizerConfig(optimizer_item, defaults)
            for optimizer_item in ydict.get(&#34;LOSS_OPTIMIZER&#34;, [{}])
        ]
        self.LOSS_SCHEDULER = [
            SchedulerConfig(scheduler_item, defaults)
            for scheduler_item in ydict.get(&#34;LOSS_SCHEDULER&#34;, [{}])
        ]

        self.LOGGING = LoggingConfig(ydict.get(&#34;LOGGING&#34;, {}), defaults)

        # Things without defaults that MUST be provided: model ✅, train_dataloader, loss ✅, trainer TODO

    def export(self, mode=&#34;yaml&#34;):
        dicts = json.dumps(self, default=config_serializer)
        dicta = json.loads(dicts)
        if mode == &#34;yaml&#34;:
            return yaml.dump(dicta)
        elif mode == &#34;json&#34;:
            return dicts
        elif mode == &#34;dict&#34;:
            return dicta


&#34;&#34;&#34;
Notes for LOSS_OPTIMIZER and LOSS_SCHEDULER
        Now we import the loss-optimizers and loss-scheduler
        Here, we need some additional code to make things work.
        
        Situation 1. LossBuilders, plus fully enumerated loss-optimizers. Simply load them into the config
        Situation 2. LossBuilders with no learnable params, and no loss-optimizers.
        Situation 3. LossBuilders with learnable parameters, and no loss-optimizers.
        Situation 4. LossBuilders, some with learnable parameters, and only corresponding loss-optimizers
        Situation 5. LossBuilders, some with learnable parameters, and less loss-optimizers
        Situation 6. LossBuilders, some with learnable parameters, and more loss-optimizers

        To cover all cases elegantly, we will simply provide:
        Situation 1. All loss-optimizers
        Situation 2. No way to check params here. Provide a default loss-optimizer
        Situation 3. No way to check params here. Provide a default loss-optimizer
        Situation 4. Provide enumerated loss-optimizers
        Situation 5. Provide enumerated loss-optimizers
        Situation 6. Provide enumerated loss-optimizers


        Then, EdnaML will:
        - construct a temporary dictionary of loss-optimizer configs, ordered by their name
        - For each loss-builder, check if there is a loss-optimizer with that name in the dict
        - If there is, then construct optimizer with those parameters
        - If there is not, then use the first optimizer&#39;s parameters to construct missing ones
        - this way, for each situation:
            Situation 1. No problems
            Situation 2. Default parameters used, but the optimizer builder will return None
            Situation 3. Default parameters used.
            Situation 4. No problems. The LossBuilders without params will return None
            Situation 5. Missing optimizers will be replaced with the first optimizer
            Situation 6. Extra optimizers will do nothing

        For Loss-schedulers, either there are enumerated schedulers, or a single default
        in EdnaML, we will match schedulers to the corresponding optimizers
        For optimizer without scheduler, create a scheduler using the first one
&#34;&#34;&#34;</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="ednaml.config.EdnaMLConfig.EdnaMLConfig"><code class="flex name class">
<span>class <span class="ident">EdnaMLConfig</span></span>
<span>(</span><span>config_path: str, defaults: <a title="ednaml.config.ConfigDefaults.ConfigDefaults" href="ConfigDefaults.html#ednaml.config.ConfigDefaults.ConfigDefaults">ConfigDefaults</a> = &lt;ednaml.config.ConfigDefaults.ConfigDefaults object&gt;)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class EdnaMLConfig:
    EXECUTION: ExecutionConfig
    SAVE: SaveConfig
    TRANSFORMATION: TransformationConfig
    MODEL: ModelConfig
    LOSS: List[LossConfig]
    OPTIMIZER: List[OptimizerConfig]  # one optimizer for each set of model params
    SCHEDULER: List[SchedulerConfig]  # one scheduler for each optimizer
    LOSS_OPTIMIZER: List[OptimizerConfig]  # one optimizer for each loss with params
    LOSS_SCHEDULER: List[SchedulerConfig]  # one scheduler for each loss_optimizer
    LOGGING: LoggingConfig

    def __init__(self, config_path: str, defaults: ConfigDefaults = ConfigDefaults()):
        ydict = {}
        with open(config_path, &#34;r&#34;) as cfile:
            ydict = yaml.safe_load(cfile.read().strip())

        self.EXECUTION = ExecutionConfig(ydict.get(&#34;EXECUTION&#34;, {}), defaults)
        self.SAVE = SaveConfig(ydict.get(&#34;SAVE&#34;, {}), defaults)
        self.TRANSFORMATION = TransformationConfig(
            ydict.get(&#34;TRANSFORMATION&#34;, {}), defaults
        )
        self.MODEL = ModelConfig(
            ydict.get(&#34;MODEL&#34;, {}), defaults
        )  # No default MODEL itself, though it will be instantiated here? deal with this TODO
        self.LOSS = [
            LossConfig(loss_item, defaults) for loss_item in ydict.get(&#34;LOSS&#34;, [])
        ]  # No default LOSS itself

        # Default optimizer is Adam
        self.OPTIMIZER = [
            OptimizerConfig(optimizer_item, defaults)
            for optimizer_item in ydict.get(&#34;OPTIMIZER&#34;, [{}])
        ]
        self.SCHEDULER = [
            SchedulerConfig(scheduler_item, defaults)
            for scheduler_item in ydict.get(&#34;SCHEDULER&#34;, [{}])
        ]

        self.LOSS_OPTIMIZER = [
            OptimizerConfig(optimizer_item, defaults)
            for optimizer_item in ydict.get(&#34;LOSS_OPTIMIZER&#34;, [{}])
        ]
        self.LOSS_SCHEDULER = [
            SchedulerConfig(scheduler_item, defaults)
            for scheduler_item in ydict.get(&#34;LOSS_SCHEDULER&#34;, [{}])
        ]

        self.LOGGING = LoggingConfig(ydict.get(&#34;LOGGING&#34;, {}), defaults)

        # Things without defaults that MUST be provided: model ✅, train_dataloader, loss ✅, trainer TODO

    def export(self, mode=&#34;yaml&#34;):
        dicts = json.dumps(self, default=config_serializer)
        dicta = json.loads(dicts)
        if mode == &#34;yaml&#34;:
            return yaml.dump(dicta)
        elif mode == &#34;json&#34;:
            return dicts
        elif mode == &#34;dict&#34;:
            return dicta</code></pre>
</details>
<h3>Class variables</h3>
<dl>
<dt id="ednaml.config.EdnaMLConfig.EdnaMLConfig.EXECUTION"><code class="name">var <span class="ident">EXECUTION</span> : <a title="ednaml.config.ExecutionConfig.ExecutionConfig" href="ExecutionConfig.html#ednaml.config.ExecutionConfig.ExecutionConfig">ExecutionConfig</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="ednaml.config.EdnaMLConfig.EdnaMLConfig.LOGGING"><code class="name">var <span class="ident">LOGGING</span> : <a title="ednaml.config.LoggingConfig.LoggingConfig" href="LoggingConfig.html#ednaml.config.LoggingConfig.LoggingConfig">LoggingConfig</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="ednaml.config.EdnaMLConfig.EdnaMLConfig.LOSS"><code class="name">var <span class="ident">LOSS</span> : List[<a title="ednaml.config.LossConfig.LossConfig" href="LossConfig.html#ednaml.config.LossConfig.LossConfig">LossConfig</a>]</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="ednaml.config.EdnaMLConfig.EdnaMLConfig.LOSS_OPTIMIZER"><code class="name">var <span class="ident">LOSS_OPTIMIZER</span> : List[<a title="ednaml.config.OptimizerConfig.OptimizerConfig" href="OptimizerConfig.html#ednaml.config.OptimizerConfig.OptimizerConfig">OptimizerConfig</a>]</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="ednaml.config.EdnaMLConfig.EdnaMLConfig.LOSS_SCHEDULER"><code class="name">var <span class="ident">LOSS_SCHEDULER</span> : List[<a title="ednaml.config.SchedulerConfig.SchedulerConfig" href="SchedulerConfig.html#ednaml.config.SchedulerConfig.SchedulerConfig">SchedulerConfig</a>]</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="ednaml.config.EdnaMLConfig.EdnaMLConfig.MODEL"><code class="name">var <span class="ident">MODEL</span> : <a title="ednaml.config.ModelConfig.ModelConfig" href="ModelConfig.html#ednaml.config.ModelConfig.ModelConfig">ModelConfig</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="ednaml.config.EdnaMLConfig.EdnaMLConfig.OPTIMIZER"><code class="name">var <span class="ident">OPTIMIZER</span> : List[<a title="ednaml.config.OptimizerConfig.OptimizerConfig" href="OptimizerConfig.html#ednaml.config.OptimizerConfig.OptimizerConfig">OptimizerConfig</a>]</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="ednaml.config.EdnaMLConfig.EdnaMLConfig.SAVE"><code class="name">var <span class="ident">SAVE</span> : <a title="ednaml.config.SaveConfig.SaveConfig" href="SaveConfig.html#ednaml.config.SaveConfig.SaveConfig">SaveConfig</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="ednaml.config.EdnaMLConfig.EdnaMLConfig.SCHEDULER"><code class="name">var <span class="ident">SCHEDULER</span> : List[<a title="ednaml.config.SchedulerConfig.SchedulerConfig" href="SchedulerConfig.html#ednaml.config.SchedulerConfig.SchedulerConfig">SchedulerConfig</a>]</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="ednaml.config.EdnaMLConfig.EdnaMLConfig.TRANSFORMATION"><code class="name">var <span class="ident">TRANSFORMATION</span> : <a title="ednaml.config.TransformationConfig.TransformationConfig" href="TransformationConfig.html#ednaml.config.TransformationConfig.TransformationConfig">TransformationConfig</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="ednaml.config.EdnaMLConfig.EdnaMLConfig.export"><code class="name flex">
<span>def <span class="ident">export</span></span>(<span>self, mode='yaml')</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def export(self, mode=&#34;yaml&#34;):
    dicts = json.dumps(self, default=config_serializer)
    dicta = json.loads(dicts)
    if mode == &#34;yaml&#34;:
        return yaml.dump(dicta)
    elif mode == &#34;json&#34;:
        return dicts
    elif mode == &#34;dict&#34;:
        return dicta</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="ednaml.config" href="index.html">ednaml.config</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="ednaml.config.EdnaMLConfig.EdnaMLConfig" href="#ednaml.config.EdnaMLConfig.EdnaMLConfig">EdnaMLConfig</a></code></h4>
<ul class="two-column">
<li><code><a title="ednaml.config.EdnaMLConfig.EdnaMLConfig.EXECUTION" href="#ednaml.config.EdnaMLConfig.EdnaMLConfig.EXECUTION">EXECUTION</a></code></li>
<li><code><a title="ednaml.config.EdnaMLConfig.EdnaMLConfig.LOGGING" href="#ednaml.config.EdnaMLConfig.EdnaMLConfig.LOGGING">LOGGING</a></code></li>
<li><code><a title="ednaml.config.EdnaMLConfig.EdnaMLConfig.LOSS" href="#ednaml.config.EdnaMLConfig.EdnaMLConfig.LOSS">LOSS</a></code></li>
<li><code><a title="ednaml.config.EdnaMLConfig.EdnaMLConfig.LOSS_OPTIMIZER" href="#ednaml.config.EdnaMLConfig.EdnaMLConfig.LOSS_OPTIMIZER">LOSS_OPTIMIZER</a></code></li>
<li><code><a title="ednaml.config.EdnaMLConfig.EdnaMLConfig.LOSS_SCHEDULER" href="#ednaml.config.EdnaMLConfig.EdnaMLConfig.LOSS_SCHEDULER">LOSS_SCHEDULER</a></code></li>
<li><code><a title="ednaml.config.EdnaMLConfig.EdnaMLConfig.MODEL" href="#ednaml.config.EdnaMLConfig.EdnaMLConfig.MODEL">MODEL</a></code></li>
<li><code><a title="ednaml.config.EdnaMLConfig.EdnaMLConfig.OPTIMIZER" href="#ednaml.config.EdnaMLConfig.EdnaMLConfig.OPTIMIZER">OPTIMIZER</a></code></li>
<li><code><a title="ednaml.config.EdnaMLConfig.EdnaMLConfig.SAVE" href="#ednaml.config.EdnaMLConfig.EdnaMLConfig.SAVE">SAVE</a></code></li>
<li><code><a title="ednaml.config.EdnaMLConfig.EdnaMLConfig.SCHEDULER" href="#ednaml.config.EdnaMLConfig.EdnaMLConfig.SCHEDULER">SCHEDULER</a></code></li>
<li><code><a title="ednaml.config.EdnaMLConfig.EdnaMLConfig.TRANSFORMATION" href="#ednaml.config.EdnaMLConfig.EdnaMLConfig.TRANSFORMATION">TRANSFORMATION</a></code></li>
<li><code><a title="ednaml.config.EdnaMLConfig.EdnaMLConfig.export" href="#ednaml.config.EdnaMLConfig.EdnaMLConfig.export">export</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>